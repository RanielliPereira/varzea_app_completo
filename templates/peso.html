<!doctype html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>ðŸ“ˆ EvoluÃ§Ã£o de Peso</h2>

  <form method="POST">
    <input type="number" step="0.1" name="peso" placeholder="Peso do dia (kg)" required>
    <button type="submit">Salvar</button>
  </form>

  <canvas id="weightChart"></canvas>

  <script>
    const ctx = document.getElementById('weightChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [{% for l in logs %}'{{ l["log_date"] }}',{% endfor %}],
        datasets: [{
          label: 'Peso (kg)',
          data: [{% for l in logs %}{{ l["weight_kg"] }},{% endfor %}],
          borderColor: 'blue',
          fill: false,
          tension: 0.2
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: false }
        }
      }
    });
  </script>

  <p><a href="{{ url_for('perfil') }}">â¬… Voltar ao Perfil</a></p>
</body>
</html>