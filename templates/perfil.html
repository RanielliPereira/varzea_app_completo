<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Perfil</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h2>Perfil</h2>
  <form method="POST">
    <label>Idade:</label>
    <input type="text" name="idade" value="{{ prof.age if prof else '' }}">
    <label>Altura (m):</label>
    <input type="text" name="altura" value="{{ prof.height_m if prof else '' }}">
    <label>Peso (kg):</label>
    <input type="text" name="peso" value="{{ prof.weight_kg if prof else '' }}">
    <button type="submit">Salvar e Calcular IMC</button>
  </form>

  {% if imc is not none and imc > 0 %}
    <div class="resultado-box 
        {% if faixa == 'Abaixo do peso' %}baixo{% endif %}
        {% if faixa == 'Peso ideal' %}ideal{% endif %}
        {% if faixa == 'Sobrepeso' %}sobrepeso{% endif %}
        {% if faixa == 'Obesidade' %}obesidade{% endif %}
    ">
      <h3>📊 Resultado do IMC</h3>
      <p><strong>IMC:</strong> {{ imc }} ({{ faixa }})</p>
      <p><strong>Peso ideal:</strong> entre {{ peso_ideal[0] }} kg e {{ peso_ideal[1] }} kg</p>
      <p><em>{{ motivacao }}</em></p>
    </div>

    <p style="text-align:center; margin-top:20px;">
      <a href="/dashboard" class="btn-voltar">← Voltar ao Dashboard</a>
    </p>
    <hr>

    <h3>📅 Registrar peso diário</h3>
    <form action="{{ url_for('peso_diario') }}" method="POST" class="peso-form">
      <label for="peso_diario">Peso de hoje (kg):</label>
      <input type="number" step="0.1" name="peso_diario" id="peso_diario" required>
      <button type="submit" class="btn">Salvar peso</button>
    </form>

    {% if pesos %}
      <h4>Histórico</h4>
      <ul>
        {% for row in pesos %}
          <li>{{ row.log_date }} – {{ row.weight_kg }} kg</li>
        {% endfor %}
      </ul>
    {% endif %}
    
    {% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="text-center">🏋️ Perfil do Jogador</h2>

  <form method="POST" class="mt-4">
    <div class="form-group">
      <label>Idade:</label>
      <input type="number" name="idade" class="form-control" value="{{ prof.age or '' }}">
    </div>

    <div class="form-group mt-3">
      <label>Altura (m):</label>
      <input type="text" name="altura" class="form-control" value="{{ prof.height_m or '' }}" placeholder="Ex: 1.75">
    </div>

    <div class="form-group mt-3">
      <label>Peso (kg):</label>
      <input type="text" name="peso" class="form-control" value="{{ prof.weight_kg or '' }}" placeholder="Ex: 72.5">
    </div>

    <button type="submit" class="btn btn-success mt-3 w-100">💾 Salvar Dados</button>
  </form>

  {% if imc %}
  <div class="card mt-4 shadow-sm">
    <div class="card-body">
      <h4 class="card-title text-center">📊 Resultados</h4>
      <p><strong>IMC:</strong> {{ imc }}</p>
      <p><strong>Faixa:</strong> {{ faixa }}</p>
      <p><strong>Peso ideal:</strong> {{ peso_ideal[0] }} kg a {{ peso_ideal[1] }} kg</p>
      <p><strong>Motivação:</strong> {{ motivacao }}</p>

      {% if mensagem %}
      <div class="alert alert-success text-center mt-3">{{ mensagem }}</div>
      {% endif %}
    </div>
  </div>
  {% endif %}

  {% if ultima_medida %}
  <div class="mt-4 text-center">
    <p class="text-muted">
      Última medição registrada em:
      <strong>{{ ultima_medida.created_at[:10] }}</strong>
    </p>
    <a href="{{ url_for('comparativo') }}" class="btn btn-primary w-100">
      📊 Ver Comparativo Corporal
    </a>
  </div>
  {% else %}
  <div class="mt-4 text-center">
    <p class="text-muted">Nenhuma medição corporal registrada ainda.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
    
  {% endif %}
  
  <a href="{{ url_for('peso_grafico') }}" class="btn-grafico">
    📊 Ver Gráfico
</a>

{% if mensagem %}
  <div class="alert alert-success" style="margin-top:10px;">
    {{ mensagem }}
  </div>
{% endif %}

</body>
</html>